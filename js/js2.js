/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/modules/google_analytics/googleanalytics.js. */
$(document).ready(function(){$(document.body).click(function(event){$(event.target).parents("a:first,area:first").andSelf().filter("a,area").each(function(){var ga=Drupal.settings.googleanalytics,isInternal=new RegExp("^(https?):\/\/"+window.location.host,"i"),isInternalSpecial=new RegExp("(\/go\/.*)$","i"),isDownload=new RegExp("\\.("+ga.trackDownloadExtensions+")$","i");if(isInternal.test(this.href)){if(ga.trackDownload&&isDownload.test(this.href)){var extension=isDownload.exec(this.href);_gaq.push(["_trackEvent","Downloads",extension[1].toUpperCase(),this.href.replace(isInternal,'')])}else if(isInternalSpecial.test(this.href))_gaq.push(["_trackPageview",this.href.replace(isInternal,'')])}else if(ga.trackMailto&&$(this).is("a[href^=mailto:],area[href^=mailto:]")){_gaq.push(["_trackEvent","Mails","Click",this.href.substring(7)])}else if(ga.trackOutgoing&&this.href)if(ga.trackOutboundAsPageview){_gaq.push(["_trackPageview",'/outbound/'+this.href.replace(/^(https?|ftp|news|nntp|telnet|irc|ssh|sftp|webcal):\/\//i,'').split('/').join('--')])}else _gaq.push(["_trackEvent","Outbound links","Click",this.href])})})});
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/modules/google_analytics/googleanalytics.js. */
/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/modules/masked_input/jquery.maskedinput-1.2.2.js. */
(function($){var pasteEventName=($.browser.msie?'paste':'input')+".mask",iPhone=(window.orientation!=undefined);$.mask={definitions:{'9':"[0-9]",a:"[A-Za-z]",'*':"[A-Za-z0-9]"}};$.fn.extend({caret:function(begin,end){if(this.length==0)return;if(typeof begin=='number'){end=(typeof end=='number')?end:begin;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(begin,end)}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select()}})}else{if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-1e5);end=begin+range.text.length};return{begin:begin,end:end}}},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){if(!mask&&this.length>0){var input=$(this[0]),tests=input.data("tests");return $.map(input.data("buffer"),function(c,i){return tests[i]?c:null}).join('')};settings=$.extend({placeholder:"_",completed:null},settings);var defs=$.mask.definitions,tests=[],partialPosition=mask.length,firstNonMaskPos=null,len=mask.length;$.each(mask.split(""),function(i,c){if(c=='?'){len--;partialPosition=i}else if(defs[c]){tests.push(new RegExp(defs[c]));if(firstNonMaskPos==null)firstNonMaskPos=tests.length-1}else tests.push(null)});return this.each(function(){var input=$(this),buffer=$.map(mask.split(""),function(c,i){if(c!='?')return defs[c]?settings.placeholder:c}),ignore=false,focusText=input.val();input.data("buffer",buffer).data("tests",tests)
function seekNext(pos){while(++pos<=len&&!tests[pos]);return pos}
function shiftL(pos){while(!tests[pos]&&--pos>=0);for(var i=pos;i<len;i++)if(tests[i]){buffer[i]=settings.placeholder;var j=seekNext(i);if(j<len&&tests[i].test(buffer[j])){buffer[i]=buffer[j]}else break};writeBuffer();input.caret(Math.max(firstNonMaskPos,pos))}
function shiftR(pos){for(var i=pos,c=settings.placeholder;i<len;i++)if(tests[i]){var j=seekNext(i),t=buffer[i];buffer[i]=c;if(j<len&&tests[j].test(t)){c=t}else break}}
function keydownEvent(e){var pos=$(this).caret(),k=e.keyCode;ignore=(k<16||(k>16&&k<32)||(k>32&&k<41));if((pos.begin-pos.end)!=0&&(!ignore||k==8||k==46))clearBuffer(pos.begin,pos.end);if(k==8||k==46||(iPhone&&k==127)){shiftL(pos.begin+(k==46?0:-1));return false}else if(k==27){input.val(focusText);input.caret(0,checkVal());return false}}
function keypressEvent(e){if(ignore){ignore=false;return(e.keyCode==8)?false:null};e=e||window.event;var k=e.charCode||e.keyCode||e.which,pos=$(this).caret();if(e.ctrlKey||e.altKey||e.metaKey){return true}else if((k>=32&&k<=125)||k>186){var p=seekNext(pos.begin-1);if(p<len){var c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();var next=seekNext(p);$(this).caret(next);if(settings.completed&&next==len)settings.completed.call(input)}}};return false}
function clearBuffer(start,end){for(var i=start;i<end&&i<len;i++)if(tests[i])buffer[i]=settings.placeholder}
function writeBuffer(){return input.val(buffer.join('')).val()}
function checkVal(allow){var test=input.val(),lastMatch=-1;for(var i=0,pos=0;i<len;i++)if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){var c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break}};if(pos>test.length)break}else if(buffer[i]==test[pos]&&i!=partialPosition){pos++;lastMatch=i};if(!allow&&lastMatch+1<partialPosition){input.val("");clearBuffer(0,len)}else if(allow||lastMatch+1>=partialPosition){writeBuffer();if(!allow)input.val(input.val().substring(0,lastMatch+1))};return(partialPosition?i:firstNonMaskPos)};if(!input.attr("readonly"))input.one("unmask",function(){input.unbind(".mask").removeData("buffer").removeData("tests")}).bind("http://shop.mts.by/sites/default/files/advagg_js/focus.mask",function(){focusText=input.val();var pos=checkVal();writeBuffer();setTimeout(function(){if(pos==mask.length){input.caret(0,pos)}else input.caret(pos)},0)}).bind("http://shop.mts.by/sites/default/files/advagg_js/blur.mask",function(){checkVal();if(input.val()!=focusText)input.change()}).bind("http://shop.mts.by/sites/default/files/advagg_js/keydown.mask",keydownEvent).bind("http://shop.mts.by/sites/default/files/advagg_js/keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){input.caret(checkVal(true))},0)});checkVal()})}})})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/modules/masked_input/jquery.maskedinput-1.2.2.js. */
/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/modules/mts/js/mts_catalog.js. */
if(typeof console=="undefined")window.console={log:function(){},warn:function(){},error:function(){},dir:function(){},profile:function(){},profileEnd:function(){},time:function(){},timeEnd:function(){}};$(document).ready(function(){function mtsResetCatalogFilters(){$("#block-mts-3 a.reset-button, #block-mts-4 a.reset-button").click(function(){$("#block-mts-3 form input:checkbox, #block-mts-4 form input:checkbox").removeAttr("checked");$("#block-mts-3 form input:text, #block-mts-4 form input:text").val("");$("#block-mts-3 form select, #block-mts-4 form select").val("0");return false})}
function mtsShowAddFilters(){$(".block-mts form .add-parameters a.add-label").click(function(){$("form .add-parameters .add-content").toggleClass("add-content-visible");$("form .add-parameters").toggleClass("add-parameters-visible");return false})}
function mtsActivateCart(){$("#quotes-pane .getQuotes-processed").click();$("input#quote-button").click();$("#uc-cart-checkout-form #quotes-pane #edit-panes-quotes-quote-button").remove()}
function mtsCheckAcceptedTerms(){$("#uc-cart-checkout-form #edit-terms-wrapper input").removeAttr("checked");$("#uc-cart-checkout-form #edit-continue").attr("disabled","disabled");$("#uc-cart-checkout-form #edit-terms-wrapper input").click(function(){var button=$("#uc-cart-checkout-form #edit-continue"),checked=$(this).attr('checked');if(checked==true){button.removeClass("disabled").addClass("enabled");$(button).removeAttr("disabled")}else{$(button).attr("disabled","disabled");button.removeClass("enabled").addClass("disabled")}})}
function mtsDisableLink(){$("#block-menu-menu-header-menu .menu li.first a").click(function(){return false})}
function mtsRegisrationMakeMaleDefault(){var checkedMale=$("#user-register .form-radios input:first").attr('checked'),checkedFemale=$("#user-register .form-radios input:last").attr('checked');if(!checkedMale&&!checkedFemale)$("#user-register .form-radios input:first").attr("checked","checked")}
function mtsSetFeedbackEmailMaxlength(){$("#webform-client-form-403 #edit-submitted-e-mail-dlya-otveta").attr("maxlength","250")};mtsSetFeedbackEmailMaxlength();mtsResetCatalogFilters();mtsRegisrationMakeMaleDefault();mtsRegisrationMakeMaleDefault();mtsShowAddFilters();mtsActivateCart();mtsCheckAcceptedTerms();mtsDisableLink();(function(){var paymentPane=$('body.page-cart').find('#payment-pane');$("#payment_details",paymentPane).hide();paymentPane.find('.form-radio:checked').closest(".form-item").find(".payment-pane-descr").show();paymentPane.find('.form-radio').change(function(){$(this).closest(".form-item").siblings().find(".payment-pane-descr:visible").slideUp(200);$(this).closest(".form-item").find(".payment-pane-descr").slideDown(200)});$("body.page-cart #quotes-pane #quote").each(function(){var par=$(this),items=$(".form-item",this),inputs=$("> LABEL > :radio",items);inputs.not(":checked").each(function(){$(this).closest(".form-item").find(".descr").hide();$(this).closest(".form-item").find("> #store_pickup").hide()});inputs.change(function(){inputs.not(":checked").each(function(){$(this).closest(".form-item").find(".descr:visible").slideUp(200);$(this).closest(".form-item").find("#store_pickup:visible").slideUp(200)});$(this).closest(".form-item").find(".descr").slideDown(200);$(this).closest(".form-item").find("#store_pickup").slideDown(200)})});$("#customer-pane").css("margin-top",$("#delivery-pane").height()+5);$("#comments-pane").css("margin-top",$("#delivery-pane").height()+$("#customer-pane").height()+25);$(window).bind("load",function(){$("#customer-pane").css("margin-top",$("#delivery-pane").height()+5);$("#comments-pane").css("margin-top",$("#delivery-pane").height()+$("#customer-pane").height()+25)});jsSel("#edit-panes-delivery-delivery-zone, #address-pane #edit-panes-address-zone");$("#edit-panes-delivery-delivery-zone").bind("change",function(){if($("OPTION:selected",this).text()=="Минск"){$(this).closest("TR").next().find(":text").val("Минск")}else if($(this).closest("TR").next().find(":text").val()=="Минск")$(this).closest("TR").next().find(":text").val("")})
function jsSel(el){var sel=$(el).wrap("<div class='js-sel-wrap'></div>"),options=$("option",sel),wrap=sel.parent(),head=$('<span class="js-sel__head"><span></span></span>').prependTo(wrap),head_txt=$("SPAN",head).text(selGetTxt(sel)),sel_body_wrap=$('<span class="js-sel__body"><span class="js-sel__body__i"></span></span>').appendTo(wrap),sel_body=sel_body_wrap.children();options.each(function(){cl="";if($(this).attr("selected")||this.selected)cl="js-sel__body__cur";$('<span class="'+cl+'">'+$(this).text()+'</span>').appendTo(sel_body)});if(sel.hasClass("error"))wrap.addClass("js-sel-wrap_err");head_txt.text(selGetTxt(sel));sel.bind("change keyup",function(){head_txt.text(selGetTxt(sel))});head.click(function(){sel_body_wrap.toggle()});$("SPAN",sel_body).click(function(){var pos=$(this).prevAll().length;sel_body_wrap.hide();if(!$(this).hasClass("js-sel__body__cur")){$(this).addClass("js-sel__body__cur").siblings().removeClass("js-sel__body__cur");options.eq(pos).attr("selected","selected");sel.trigger("change")}})}
function selGetTxt(sel){var ret="";$("option",sel).each(function(){if($(this).attr("selected")||this.selected)ret=$(this).text()});return ret}})();(function(){var cart=$('body.page-cart').find('.cart-outer-wrapper');if(cart.length){cart.find('.order-success').parent().removeClass('clear-block');cart.find('p#cart-form-pane').parent().removeClass('clear-block');cart.find('.order-review-table').find('.title-col').each(function(){var tmpContent=$(this).html();$(this).html('<div class="ins"><span>'+tmpContent+'</span></div>')})}})();if($(".view-straintse-goods").length){var x,x1,y,y1;x=$('.views-field-sell-price').text();x1=x.replace(/\s/g,"");y=$('.views-field-field-product-old-price-value').text();y1=y.replace(/\s/g,"");if(x1==y1)$('.views-field-field-product-old-price-value').hide()};if($("#user-profile-form").length)$("#edit-mail").attr({readonly:"true"});if($("#node-form").length){if($("#edit-model").attr("value")!=''&&$("#edit-model").attr("value").substr(0,2)!="ww")$("#edit-model").attr({readonly:"true"});$('#edit-delete').remove()};if($("#node-form").length)if($("#node-form fieldset.group-laptop-battery #edit-field-type-accessory-value-wrapper").length)$('#edit-field-type-accessory-value-wrapper').hide();if($(".admin-content-node").length)if($("#edit-operation").length)$('[value="delete"]').remove();if($("#mts_product_tab0 .field-field-product-mobile-memory-zvez"))$("#mts_product_tab0 .field-field-product-mobile-memory-zvez").attr({title:"Объём доступной пользователю памяти может быть меньше, поскольку часть памяти может использоваться системой"});if($(".view-choice-tariff").length){var view=$(".view-choice-tariff:eq(0)"),view_widgets=$(".views-exposed-widget:not(.views-submit-button)",view),view_descr=$(".prefix_hoice_tariff",view),shadow=$('<div class="shadow-choice-tariff"></div>').insertBefore(view),shadow_descr=view_descr.clone().appendTo(shadow),shadow_widgets_list=$('<div class="shadow-choice-tariff__list"></div>').appendTo(shadow),shadow_widgets;view_widgets.each(function(i){var li=$('<li class="shadow-choice-tariff__item"><h4></h4><ul></ul></li>').appendTo(shadow_widgets_list);$("> H4",li).text($("> LABEL",this).text()).append("<i>"+(i+1)+"</i>");$(".form-item:not(:first-child)",this).each(function(){$('<li><label><input type="radio" name="shadow-choise-tariff_n'+i+'" /> '+$("LABEL",this).text()+'</label></li>').appendTo($("UL",li))});$(":radio",li).bind("change",function(){if($(this).attr("checked")||this.checked)$(this).closest(".shadow-choice-tariff__item").find(".shadow-choice-tariff__ctrls .next").removeClass("disabled")});$('<div class="shadow-choice-tariff__ctrls">'+(i==0?'':'<div class="prev">Назад</div>')+(i==view_widgets.length?'':'<div class="next disabled">Вперед</div>')+'</div>').appendTo(li);$(".shadow-choice-tariff__ctrls .next",li).click(function(){var step=$(this).closest(".shadow-choice-tariff__item").prevAll().length,option=$(":radio:checked",li).closest("LI").prevAll().length,targ=$(":radio",view_widgets.eq(step)).eq(option+1);if(!$(this).hasClass("disabled"))targ.attr("checked","checked").click()});$(".shadow-choice-tariff__ctrls .prev",li).click(function(){var step=$(this).closest(".shadow-choice-tariff__item").prevAll().length,targ=$(":radio",view_widgets.eq(step-1)).eq(0);if(!$(this).hasClass("disabled")){$(":radio:checked",li.prev()).attr("checked","");targ.attr("checked","checked").click()}})});$('body').bind('ajaxSuccess',function(data,status,xhr){view=$(".view-choice-tariff:eq(0)");view_widgets=$(".views-exposed-widget:not(.views-submit-button)",view);tariffsSetStep(tariffsGetStep())});$(document).click(function(e){if($(e.target).closest(".shadow-choice-tariff__item.disabled").length){e.stopPropagation();e.preventDefault();return false}});shadow_widgets=shadow_widgets_list.children();function tariffsGetStep(){res=-1;view_widgets.each(function(index){if($(this).find(".bef-select-as-radios .form-item:first-child :radio:checked").length&&res==-1)res=index});return res};function tariffsSetStep(step){if(step==view_widgets.length||step==-1)step=view_widgets.length-1;shadow_widgets.each(function(i){if(i<step){$(this).addClass("disabled").removeClass("hidden cur");$("li :radio",this).each(function(j){$(this).attr("checked",view_widgets.eq(i).find(":radio").eq(j+1).attr("checked"))})}else if(i>step){$(this).addClass("hidden").removeClass("disabled cur")}else if(i==step){$(this).addClass("cur").removeClass("disabled hidden");$(".shadow-choice-tariff__ctrls .next",this).addClass("disabled")}});view_widgets.each(function(index){if($(this).find(".bef-select-as-radios .form-item:first-child :radio:checked").length&&res==-1)res=index});return res};tariffsSetStep(tariffsGetStep())};(function(){var tariffAddition=$('#tariff_additions');if(!tariffAddition.length)return false;var additionItems=tariffAddition.find('.addition-item');additionItems.find('input[type=radio]:checked').parent().addClass('checked');additionItems.click(function(){if(!$(this).hasClass('checked')){$(this).addClass('checked').siblings().removeClass('checked');$(this).find('input[type=radio]').click()}})})();$(".article-cut .article-cut__head").click(function(){$(this).closest(".article-cut").find(".article-cut__body").slideToggle(200,function(){$(this).closest(".article-cut").toggleClass("article-cut_open")})});fixCatalogLayout();$(window).bind("load",fixCatalogLayout)
function fixCatalogLayout(){$(".catalog-table .product_info").each(function(){$(".product_teaser_info",this).css("min-height",Math.max(getTallest($(".product_teaser_info",this)),getTallest($(".product_teaser_pic",this))))})}
function getTallest(els){var res=0;$(els).each(function(){if(res<$(this).height())res=$(this).height()});return res};if($("#payment-pane").length){var descr=$("#payment-pane > .form-item").nextAll("DIV").not("#payment_details"),items=$("#payment-pane .form-radios .form-item");descr.each(function(){$(this).addClass("payment-pane-descr").appendTo(items.filter("#edit-panes-payment-payment-method-"+this.id.replace(/_/gi,"-")+"-wrapper"))});items.filter(":has(:radio:checked)").find(".descr").show()};if($(".order-review-table .row_total").length){var tbl=$(".order-review-table"),trs=$("> TBODY > TR",tbl),tbl_headers=trs.filter(".pane-title-row"),order_money=tbl_headers.eq(0).next(),row_total=trs.filter(".row_total"),s_th=s_td="",insertLast;$(".cart-outer-wrapper > .clear-block").addClass("cart-confirm");order_money.hide();insertLast=tbl_headers.eq(0);$("TR:has(.review-n)",order_money).each(function(i){s_th=$(".review-n",this).text()+" "+$(".review-desc",this).text();s_td=$(".review-price",this).text();insertLast=orderReviewRow(s_th,s_td).insertAfter(insertLast)});$("TR:has(.review-total-sum)",order_money).eq(1).each(function(i){s_th="Ваша скидка:";s_td=$(".review-total-sum",this).text().split(" ")[2].replace(":","");insertLast=orderReviewRow(s_th,s_td).insertAfter(insertLast)});$("TR:has(.review-total-sum)",order_money).eq(2).each(function(i){s_th="Итого со скидкой:";s_td='<strong>'+$(".review-price-total",this).text()+'</strong>';insertLast=orderReviewRow(s_th,s_td).insertAfter(insertLast)});tbl_headers.eq(4).hide();insertLast=row_total.hide();row_total.each(function(i){s_th=$(".review_comment",this).text();s_td=$(".review_total_desc",this).text();insertLast=orderReviewRowNodots(s_th,s_td).insertAfter(insertLast)});insertLast.addClass("row_total");tbl_headers.prev().addClass("row-last-in-section");if(tbl_headers.prev().is(":not(:visible)"))tbl_headers.prev().prev().addClass("row-last-in-section");$('<div class="order-review-ctrls"></div>').insertAfter(tbl.parent()).append(trs.filter(".review-button-row").find("form"))}
function orderReviewRow(th,td){return $('<tr><td class="title-col"><div class="ins"><span>'+th+'</span></div></td><td class="data-col">'+td+'</td></tr>')}
function orderReviewRowNodots(th,td){return $('<tr><td class="title-col">'+th+'</td><td class="data-col">'+td+'</td></tr>')};$("body.node-type-article .content > .field-field-fieldblock:first-child:has(.view-straintse-goods)").each(function(){$(this).wrap('<div class="review-side-buy"></div>')});if($("#comments").length)$("#comments + .fivestar-widget").appendTo($("#comments .title + DIV"));(function($){$.browserTest=function(a,z){var u='unknown',x='X',m=function(r,h){for(var i=0;i<h.length;i=i+1)r=r.replace(h[i][0],h[i][1]);return r},c=function(i,a,b,c){var r={name:m((a.exec(i)||[u,u])[1],b)};r[r.name]=true;r.version=(c.exec(i)||[x,x,x,x])[3];if(r.name.match(/safari/)&&r.version>400)r.version='2.0';if(r.name==='presto')r.version=($.browser.version>9.27)?'futhark':'linear_b';r.versionNumber=parseFloat(r.version,10)||0;r.versionX=(r.version!==x)?(r.version+'').substr(0,1):x;r.className=r.name+r.versionX;return r};a=(a.match(/Opera|Navigator|Minefield|KHTML|Chrome/)?m(a,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,''],['Chrome Safari','Chrome'],['KHTML','Konqueror'],['Minefield','Firefox'],['Navigator','Netscape']]):a).toLowerCase();$.browser=$.extend((!z)?$.browser:{},c(a,/(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/));$.layout=c(a,/(gecko|konqueror|msie|opera|webkit)/,[['konqueror','khtml'],['msie','trident'],['opera','presto']],/(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/);$.os={name:(/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase())||[u])[0].replace('sunos','solaris')};if(!z)$('html').addClass([$.os.name,$.browser.name,$.browser.className,$.layout.name,$.layout.className].join(' '))};$.browserTest(navigator.userAgent)})(jQuery)});
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/modules/mts/js/mts_catalog.js. */
$(document).ready(function(){
    $(".node-form select[multiple='multiple']").css("height", "200px");
});
/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/modules/ctools/js/ajax-responder.js. */
(function($){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.AJAX=Drupal.CTools.AJAX||{};Drupal.CTools.AJAX.commands=Drupal.CTools.AJAX.commands||{};Drupal.CTools.AJAX.commandCache=Drupal.CTools.AJAX.comandCache||{};Drupal.CTools.AJAX.scripts={};Drupal.CTools.AJAX.css={};Drupal.CTools.AJAX.respond=function(data){for(i in data)if(data[i]['command']&&Drupal.CTools.AJAX.commands[data[i]['command']])Drupal.CTools.AJAX.commands[data[i]['command']](data[i])};Drupal.CTools.AJAX.warmCache=function(){$this=$(this);var old_url=$this.attr('href');if($this.hasClass('ctools-fetching')||Drupal.CTools.AJAX.commandCache[old_url])return false;var $objects=$('a[href="'+old_url+'"]');$objects.addClass('ctools-fetching');try{url=Drupal.CTools.AJAX.urlReplaceNojs(url);$.ajax({type:"POST",url:url,data:{js:1,ctools_ajax:1},global:true,success:function(data){Drupal.CTools.AJAX.commandCache[old_url]=data;$objects.addClass('ctools-cache-warmed').trigger('ctools-cache-warm',[data])},complete:function(){$objects.removeClass('ctools-fetching')},dataType:'json'})}catch(err){$objects.removeClass('ctools-fetching');return false};return false};Drupal.CTools.AJAX.clickAJAXCacheLink=function(){$this=$(this);if($this.hasClass('ctools-fetching')){$this.bind('ctools-cache-warm',function(event,data){Drupal.CTools.AJAX.respond(data)});return false}else if($this.hasClass('ctools-cache-warmed')&&Drupal.CTools.AJAX.commandCache[$this.attr('href')]){Drupal.CTools.AJAX.respond(Drupal.CTools.AJAX.commandCache[$this.attr('href')]);return false}else return Drupal.CTools.AJAX.clickAJAXLink.apply(this)};Drupal.CTools.AJAX.clickAJAXLink=function(){if($(this).hasClass('ctools-ajaxing'))return false;var url=$(this).attr('href'),object=$(this);$(this).addClass('ctools-ajaxing');try{url=Drupal.CTools.AJAX.urlReplaceNojs(url);$.ajax({type:"POST",url:url,data:{js:1,ctools_ajax:1},global:true,success:Drupal.CTools.AJAX.respond,error:function(xhr){Drupal.CTools.AJAX.handleErrors(xhr,url)},complete:function(){$('.ctools-ajaxing').removeClass('ctools-ajaxing')},dataType:'json'})}catch(err){alert("An error occurred while attempting to process "+url);$('.ctools-ajaxing').removeClass('ctools-ajaxing');return false};return false};Drupal.CTools.AJAX.clickAJAXButton=function(){if($(this).hasClass('ctools-ajaxing'))return false;this.form.clk=this;var url=Drupal.CTools.AJAX.findURL(this);$(this).addClass('ctools-ajaxing');var object=$(this);try{if(url){url=Drupal.CTools.AJAX.urlReplaceNojs(url);$.ajax({type:"POST",url:url,data:{js:1,ctools_ajax:1},global:true,success:Drupal.CTools.AJAX.respond,error:function(xhr){Drupal.CTools.AJAX.handleErrors(xhr,url)},complete:function(){$('.ctools-ajaxing').removeClass('ctools-ajaxing')},dataType:'json'})}else{var form=this.form;url=$(form).attr('action');setTimeout(function(){Drupal.CTools.AJAX.ajaxSubmit(form,url)},1)}}catch(err){alert("An error occurred while attempting to process "+url);$(this).removeClass('ctools-ajaxing');return false};return false};Drupal.CTools.AJAX.ajaxSubmit=function(form,url){$form=$(form);if($form.hasClass('ctools-ajaxing'))return false;$form.addClass('ctools-ajaxing');try{url=Drupal.CTools.AJAX.urlReplaceNojs(url);var ajaxOptions={type:'POST',url:url,data:{js:1,ctools_ajax:1},global:true,success:Drupal.CTools.AJAX.respond,error:function(xhr){Drupal.CTools.AJAX.handleErrors(xhr,url)},complete:function(){$('.ctools-ajaxing').removeClass('ctools-ajaxing');$('div.ctools-ajaxing-temporary').remove()},dataType:'json'};if($form.attr('enctype')=='multipart/form-data'){$form.append('<input type="hidden" name="ctools_multipart" value="1">');ajaxIframeOptions={success:Drupal.CTools.AJAX.iFrameJsonRespond,iframe:true};ajaxOptions=$.extend(ajaxOptions,ajaxIframeOptions)};$form.ajaxSubmit(ajaxOptions)}catch(err){alert("An error occurred while attempting to process "+url);$('.ctools-ajaxing').removeClass('ctools-ajaxing');$('div.ctools-ajaxing-temporary').remove();return false}};Drupal.CTools.AJAX.iFrameJsonRespond=function(data){var myJson=eval(data);Drupal.CTools.AJAX.respond(myJson)};Drupal.CTools.AJAX.handleErrors=function(xhr,path){var error_text='';if((xhr.status==500&&xhr.responseText)||xhr.status==200){error_text=xhr.responseText;error_text=error_text.replace("/&(lt|gt);/g",function(m,p){return(p=="lt")?"<":">"});error_text=error_text.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");error_text=error_text.replace(/[\n]+\s+/g,"\n")}else if(xhr.status==500){error_text=xhr.status+': '+Drupal.t("Internal server error. Please see server or PHP logs for error information.")}else error_text=xhr.status+': '+xhr.statusText;alert(Drupal.t("An error occurred at @path.\n\nError Description: @error",{'@path':path,'@error':error_text}))};Drupal.CTools.AJAX.changeAJAX=function(){if($(this).hasClass('ctools-ajaxing'))return false;var url=Drupal.CTools.AJAX.findURL(this);$(this).addClass('ctools-ajaxing');var object=$(this),form_id=$(object).parents('form').get(0).id;try{if(url){url=Drupal.CTools.AJAX.urlReplaceNojs(url);$.ajax({type:"POST",url:url,data:{ctools_changed:$(this).val(),js:1,ctools_ajax:1},global:true,success:Drupal.CTools.AJAX.respond,error:function(xhr){Drupal.CTools.AJAX.handleErrors(xhr,url)},complete:function(){$('.ctools-ajaxing').removeClass('ctools-ajaxing');if($(object).hasClass('ctools-ajax-submit-onchange'))$('form#'+form_id).submit()},dataType:'json'})}else{if($(object).hasClass('ctools-ajax-submit-onchange'))$('form#'+form_id).submit();return false}}catch(err){alert("An error occurred while attempting to process "+url);$('.ctools-ajaxing').removeClass('ctools-ajaxing');return false};return false};Drupal.CTools.AJAX.findURL=function(item){var url='',url_class='.'+$(item).attr('id')+'-url';$(url_class).each(function(){if(url&&$(this).val())url+='/';url+=$(this).val()});return url};Drupal.CTools.AJAX.getPath=function(link){if(!link)return;var index=link.indexOf('?');if(index!=-1)link=link.substr(0,index);return link};Drupal.CTools.AJAX.commands.prepend=function(data){$(data.selector).prepend(data.data);Drupal.attachBehaviors($(data.selector))};Drupal.CTools.AJAX.commands.append=function(data){$(data.selector).append(data.data);Drupal.attachBehaviors($(data.selector))};Drupal.CTools.AJAX.commands.replace=function(data){$(data.selector).replaceWith(data.data);Drupal.attachBehaviors($(data.selector))};Drupal.CTools.AJAX.commands.after=function(data){var object=$(data.data);$(data.selector).after(object);Drupal.attachBehaviors(object)};Drupal.CTools.AJAX.commands.before=function(data){var object=$(data.data);$(data.selector).before(object);Drupal.attachBehaviors(object)};Drupal.CTools.AJAX.commands.html=function(data){$(data.selector).html(data.data);Drupal.attachBehaviors($(data.selector))};Drupal.CTools.AJAX.commands.remove=function(data){$(data.selector).remove()};Drupal.CTools.AJAX.commands.changed=function(data){if(!$(data.selector).hasClass('changed')){$(data.selector).addClass('changed');if(data.star)$(data.selector).find(data.star).append(' <span class="star">*</span> ')}};Drupal.CTools.AJAX.commands.alert=function(data){alert(data.text,data.title)};Drupal.CTools.AJAX.commands.css=function(data){$(data.selector).css(data.argument)};Drupal.CTools.AJAX.commands.css_files=function(data){$('link:not(.ctools-temporary-css)').each(function(){if($(this).attr('type')=='text/css'){var link=Drupal.CTools.AJAX.getPath($(this).attr('href'));if(link)Drupal.CTools.AJAX.css[link]=$(this).attr('href')}});var html='';for(var i=0;i<data.argument.length;i++){var link=Drupal.CTools.AJAX.getPath(data.argument[i].file);if(!Drupal.CTools.AJAX.css[link])html+='<link class="ctools-temporary-css" type="text/css" rel="stylesheet" media="'+data.argument[i].media+'" href="'+data.argument[i].file+'" />'};if(html){$('link.ctools-temporary-css').remove();$('body').append($(html))}};Drupal.CTools.AJAX.commands.settings=function(data){$.extend(Drupal.settings,data.argument)};Drupal.CTools.AJAX.commands.scripts=function(data){var scripts={};$('script').each(function(){var link=Drupal.CTools.AJAX.getPath($(this).attr('src'));if(link)Drupal.CTools.AJAX.scripts[link]=$(this).attr('src')});var html='',head=document.getElementsByTagName('head')[0];for(var i=0;i<data.argument.length;i++){var link=Drupal.CTools.AJAX.getPath(data.argument[i]);if(!Drupal.CTools.AJAX.scripts[link]){Drupal.CTools.AJAX.scripts[link]=link;var script=document.createElement('script');script.type='text/javascript';script.src=data.argument[i];head.appendChild(script);html+='<script type="text/javascript" src="'+data.argument[i]+'"></script>'}};if(html)$('body').append($(html))};Drupal.CTools.AJAX.commands.data=function(data){$(data.selector).data(data.name,data.value)};Drupal.CTools.AJAX.commands.attr=function(data){$(data.selector).attr(data.name,data.value)};Drupal.CTools.AJAX.commands.restripe=function(data){$('tbody tr:not(:hidden)',$(data.selector)).removeClass('even').removeClass('odd').filter(':even').addClass('odd').end().filter(':odd').addClass('even')};Drupal.CTools.AJAX.commands.redirect=function(data){if(data.delay>0){setTimeout(function(){location.href=data.url},data.delay)}else location.href=data.url};Drupal.CTools.AJAX.commands.reload=function(data){location.reload()};Drupal.CTools.AJAX.commands.submit=function(data){$(data.selector).submit()};Drupal.CTools.AJAX.urlReplaceNojs=function(url){return url.replace(/\/nojs(\/|$|\?|&|#)/g,'/ajax$1')};Drupal.behaviors.CToolsAJAX=function(context){$('a.ctools-use-ajax-cache:not(.ctools-use-ajax-processed)',context).addClass('ctools-use-ajax-processed').click(Drupal.CTools.AJAX.clickAJAXCacheLink).each(function(){Drupal.CTools.AJAX.warmCache.apply(this)});$('a.ctools-use-ajax:not(.ctools-use-ajax-processed)',context).addClass('ctools-use-ajax-processed').click(Drupal.CTools.AJAX.clickAJAXLink);$('input.ctools-use-ajax:not(.ctools-use-ajax-processed), button.ctools-use-ajax:not(.ctools-use-ajax-processed)',context).addClass('ctools-use-ajax-processed').click(Drupal.CTools.AJAX.clickAJAXButton);$('select, input:text, input:radio, input:checkbox',context).filter('.ctools-use-ajax-onchange:not(.ctools-use-ajax-processed)').addClass('ctools-use-ajax-processed').change(Drupal.CTools.AJAX.changeAJAX);if(Drupal.settings.CToolsAJAX&&Drupal.settings.CToolsAJAX.css)$.extend(Drupal.CTools.AJAX.css,Drupal.settings.CToolsAJAX.css);if(Drupal.settings.CToolsAJAX&&Drupal.settings.CToolsAJAX.scripts)$.extend(Drupal.CTools.AJAX.scripts,Drupal.settings.CToolsAJAX.scripts)}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/modules/ctools/js/ajax-responder.js. */
/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/modules/ctools/js/modal.js. */
(function($){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.Modal=Drupal.CTools.Modal||{};Drupal.CTools.Modal.show=function(choice){var opts={};if(choice&&typeof choice=='string'&&Drupal.settings[choice]){$.extend(true,opts,Drupal.settings[choice])}else if(choice)$.extend(true,opts,choice);var defaults={modalTheme:'CToolsModalDialog',throbberTheme:'CToolsModalThrobber',animation:'show',animationSpeed:'fast',modalSize:{type:'scale',width:.8,height:.8,addWidth:0,addHeight:0,contentRight:25,contentBottom:45},modalOptions:{opacity:.55,background:'#fff'}},settings={};$.extend(true,settings,defaults,Drupal.settings.CToolsModal,opts);if(Drupal.CTools.Modal.currentSettings&&Drupal.CTools.Modal.currentSettings!=settings){Drupal.CTools.Modal.modal.remove();Drupal.CTools.Modal.modal=null};Drupal.CTools.Modal.currentSettings=settings;var resize=function(e){var context=e?document:Drupal.CTools.Modal.modal;if(Drupal.CTools.Modal.currentSettings.modalSize.type=='scale'){var width=$(window).width()*Drupal.CTools.Modal.currentSettings.modalSize.width,height=$(window).height()*Drupal.CTools.Modal.currentSettings.modalSize.height}else{var width=Drupal.CTools.Modal.currentSettings.modalSize.width,height=Drupal.CTools.Modal.currentSettings.modalSize.height};$('div.ctools-modal-content',context).css({width:width+Drupal.CTools.Modal.currentSettings.modalSize.addWidth+'px',height:height+Drupal.CTools.Modal.currentSettings.modalSize.addHeight+'px'});$('div.ctools-modal-content .modal-content',context).css({width:(width-Drupal.CTools.Modal.currentSettings.modalSize.contentRight)+'px',height:(height-Drupal.CTools.Modal.currentSettings.modalSize.contentBottom)+'px'})};if(!Drupal.CTools.Modal.modal){Drupal.CTools.Modal.modal=$(Drupal.theme(settings.modalTheme));if(settings.modalSize.type=='scale')$(window).bind('resize',resize)};resize();$('span.modal-title',Drupal.CTools.Modal.modal).html(Drupal.CTools.Modal.currentSettings.loadingText);Drupal.CTools.Modal.modalContent(Drupal.CTools.Modal.modal,settings.modalOptions,settings.animation,settings.animationSpeed);$('#modalContent .modal-content').html(Drupal.theme(settings.throbberTheme))};Drupal.CTools.Modal.dismiss=function(){if(Drupal.CTools.Modal.modal)Drupal.CTools.Modal.unmodalContent(Drupal.CTools.Modal.modal)};Drupal.theme.prototype.CToolsModalDialog=function(){var html='';html+='  <div id="ctools-modal">';html+='    <div class="ctools-modal-content">';html+='      <div class="modal-header">';html+='        <a class="close" href="#">';html+=Drupal.CTools.Modal.currentSettings.closeText+Drupal.CTools.Modal.currentSettings.closeImage;html+='        </a>';html+='        <span id="modal-title" class="modal-title">&nbsp;</span>';html+='      </div>';html+='      <div id="modal-content" class="modal-content">';html+='      </div>';html+='    </div>';html+='  </div>';return html};Drupal.theme.prototype.CToolsModalThrobber=function(){var html='';html+='  <div id="modal-throbber">';html+='    <div class="modal-throbber-wrapper">';html+=Drupal.CTools.Modal.currentSettings.throbber;html+='    </div>';html+='  </div>';return html};Drupal.CTools.Modal.getSettings=function(object){var match=$(object).attr('class').match(/ctools-modal-(\S+)/);if(match)return match[1]};Drupal.CTools.Modal.clickAjaxCacheLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));return Drupal.CTools.AJAX.clickAJAXCacheLink.apply(this)};Drupal.CTools.Modal.clickAjaxLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));Drupal.CTools.AJAX.clickAJAXLink.apply(this);if(!$(this).hasClass('ctools-ajaxing'))Drupal.CTools.Modal.dismiss();return false};Drupal.CTools.Modal.clickAjaxButton=function(){if($(this).hasClass('ctools-ajaxing'))return false;Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));Drupal.CTools.AJAX.clickAJAXButton.apply(this);if(!$(this).hasClass('ctools-ajaxing'))Drupal.CTools.Modal.dismiss();return false};Drupal.CTools.Modal.submitAjaxForm=function(e){var url=$(this).attr('action'),form=$(this);setTimeout(function(){Drupal.CTools.AJAX.ajaxSubmit(form,url)},1);return false};Drupal.behaviors.ZZCToolsModal=function(context){$('a.ctools-use-modal-cache:not(.ctools-use-modal-processed)',context).addClass('ctools-use-modal-processed').click(Drupal.CTools.Modal.clickAjaxCacheLink).each(function(){Drupal.CTools.AJAX.warmCache.apply(this)});$('a.ctools-use-modal:not(.ctools-use-modal-processed)',context).addClass('ctools-use-modal-processed').click(Drupal.CTools.Modal.clickAjaxLink);$('input.ctools-use-modal:not(.ctools-use-modal-processed), button.ctools-use-modal:not(.ctools-use-modal-processed)',context).addClass('ctools-use-modal-processed').click(Drupal.CTools.Modal.clickAjaxButton);$('#modal-content form:not(.ctools-use-modal-processed)',context).addClass('ctools-use-modal-processed').submit(Drupal.CTools.Modal.submitAjaxForm).bind('CToolsAJAXSubmit',Drupal.CTools.AJAX.ajaxSubmit);$('#modal-content input[type="submit"]:not(.ctools-use-modal-processed), #modal-content button:not(.ctools-use-modal-processed)',context).addClass('ctools-use-modal-processed').click(function(){if(Drupal.autocompleteSubmit&&!Drupal.autocompleteSubmit())return false;if(!$(this.form).hasClass('ctools-ajaxing'))this.form.clk=this});$('.ctools-close-modal:not(.ctools-close-modal-processed)',context).addClass('ctools-close-modal-processed').click(function(){Drupal.CTools.Modal.dismiss();return false})};Drupal.CTools.AJAX.commands.modal_display=function(command){$('#modal-title').html(command.title);$('#modal-content').html(command.output);Drupal.attachBehaviors()};Drupal.CTools.AJAX.commands.modal_dismiss=function(command){Drupal.CTools.Modal.dismiss();$('link.ctools-temporary-css').remove()};Drupal.CTools.AJAX.commands.modal_loading=function(command){Drupal.CTools.AJAX.commands.modal_display({output:Drupal.theme(Drupal.CTools.Modal.currentSettings.throbberTheme),title:Drupal.CTools.Modal.currentSettings.loadingText})};Drupal.CTools.Modal.modalContent=function(content,css,animation,speed){if(!animation){animation='show'}else if(animation!='fadeIn'&&animation!='slideDown')animation='show';if(!speed)speed='fast';css=jQuery.extend({position:'absolute',left:'0px',margin:'0px',background:'#000',opacity:'.55'},css);css.filter='alpha(opacity='+(100*css.opacity)+')';content.hide();if($('#modalBackdrop'))$('#modalBackdrop').remove();if($('#modalContent'))$('#modalContent').remove();if(self.pageYOffset){var wt=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){var wt=document.documentElement.scrollTop}else if(document.body)var wt=document.body.scrollTop;var docHeight=$(document).height()+50,docWidth=$(document).width(),winHeight=$(window).height(),winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;$('body').append('<div id="modalBackdrop" style="z-index: 1000; display: none;"></div><div id="modalContent" style="z-index: 1001; position: absolute;">'+$(content).html()+'</div>');modalEventHandler=function(event){target=null;if(event){target=event.target}else{event=window.event;target=event.srcElement};var parents=$(target).parents().get();for(var i in $(target).parents().get()){var position=$(parents[i]).css('position');if(position=='absolute'||position=='fixed')return true};if($(target).filter('*:visible').parents('#modalContent').size())return true;if($('#modalContent'))$('#modalContent').get(0).focus();return false};$('body').bind('focus',modalEventHandler);$('body').bind('keypress',modalEventHandler);var modalContent=$('#modalContent').css('top','-1000px'),mdcTop=wt+(winHeight/2)-(modalContent.outerHeight()/2),mdcLeft=(winWidth/2)-(modalContent.outerWidth()/2);$('#modalBackdrop').css(css).css('top',0).css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css({top:mdcTop+'px',left:mdcLeft+'px'}).hide()[animation](speed);modalContentClose=function(){close();return false};$('.close').bind('click',modalContentClose)
function close(){$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('.close').unbind('click',modalContentClose);$(document).trigger('CToolsDetachBehaviors',$('#modalContent'));if(animation=='fadeIn')animation='fadeOut';if(animation=='slideDown')animation='slideUp';if(animation=='show')animation='hide';modalContent.hide()[animation](speed);$('#modalContent').remove();$('#modalBackdrop').remove()};modalContentResize=function(){var docHeight=$(document).height(),docWidth=$(document).width(),winHeight=$(window).height(),winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;var modalContent=$('#modalContent'),mdcTop=(winHeight/2)-(modalContent.outerHeight()/2),mdcLeft=(winWidth/2)-(modalContent.outerWidth()/2);$('#modalBackdrop').css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css('top',mdcTop+'px').css('left',mdcLeft+'px').show()};$(window).bind('resize',modalContentResize);$('#modalContent').focus()};Drupal.CTools.Modal.unmodalContent=function(content,animation,speed){if(!animation){var animation='show'}else if((animation!='fadeOut')&&(animation!='slideUp'))animation='show';if(!speed)var speed='fast';$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('.close').unbind('click',modalContentClose);$(document).trigger('CToolsDetachBehaviors',$('#modalContent'));content.each(function(){if(animation=='fade'){$('#modalContent').fadeOut(speed,function(){$('#modalBackdrop').fadeOut(speed,function(){$(this).remove()});$(this).remove()})}else if(animation=='slide'){$('#modalContent').slideUp(speed,function(){$('#modalBackdrop').slideUp(speed,function(){$(this).remove()});$(this).remove()})}else{$('#modalContent').remove();$('#modalBackdrop').remove()}})}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/modules/ctools/js/modal.js. */
/* Source and licensing information for the line(s) below can be found at http://shop.mts.by/sites/all/themes/base/ctools/modal.js. */
Drupal.behaviors.ModalFormsMessage=function(context){$('#modalContent .message').show(function(){setTimeout(function(){Drupal.CTools.Modal.dismiss()},3e3)})};Drupal.theme.prototype.ModalFormsPopup=function(){var html='';html+='<div id="ctools-modal" class="popups-box">';html+='  <div class="ctools-modal-content modal-forms-modal-content">';html+='    <div class="popups-container">';html+='      <div class="modal-header popups-title clearfix">';html+='        <h3 id="modal-title" class="modal-title"></h3>';html+='        <span class="popups-close close">'+Drupal.CTools.Modal.currentSettings.closeText+'</span>';html+='      </div>';html+='      <div class="modal-scroll"><div id="modal-content" class="modal-content popups-body"></div></div>';html+='    </div>';html+='  </div>';html+='</div>';return html};Drupal.theme.prototype.ModalFormsMessage=function(){var html='';html+='<div id="ctools-modal" class="popups-box">';html+='  <div class="ctools-modal-content modal-forms-modal-content">';html+='    <div class="popups-container message">';html+='      <div id="modal-content" class="modal-content popups-body"></div>';html+='    </div>';html+='  </div>';html+='</div>';return html};
/* Source and licensing information for the above line(s) can be found at http://shop.mts.by/sites/all/themes/base/ctools/modal.js. */
